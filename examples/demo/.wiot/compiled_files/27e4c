gpio.mode(2,gpio.INPUT);_b=0;F_b=_b;_l=500;F_l=_l;_c=1;F_c=_c;_g=0;F_g=_g;_o=0;_d=0;F_d=_d;_e=0;F_e=_e;_f=0;F_f=_f;_p=0;_q=0;pwm.setup(4,_l,_b);pwm.setduty(4,_b);_o=function()_b=_c*_g;end;_p=function()print(_c,_d,_e,_f);end;tmr.create():alarm(10,tmr.ALARM_AUTO,function()if not(F_b==_b)then pwm.setduty(4,_b);msg.send('cc54c','_b',_b);msg.send('3beaa','_b',_b);FR_b=nil;end;F_b=_b;if not(F_l==_l)then pwm.setclock(4,_l);end;F_l=_l;if not(F_c==_c)then _o();_p();end;F_c=_c;if not(F_g==_g)then _o();end;F_g=_g;if not(F_d==_d)then _p();_c=(_c+1)%2;end;F_d=_d;if not(F_e==_e)then _p();_q=31;end;F_e=_e;if not(F_f==_f)then _p();_c=((_f=='play')and{1}or{((_f=='stop')and{0}or{_c})[1]})[1];end;F_f=_f;if not(_q==0)then _q=_q-1;end;if _q==1 then _d=_e;end;_e=gpio.read(2);end);msg.onSend('_b',function(from,body)_b=body;FR_b=from;end);